<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Winnix  | Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #3b82f6; --accent: #f59e0b; --bg: #0f172a; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg); color: white; user-select: none; -webkit-tap-highlight-color: transparent; overflow-x: hidden; }
        
        .glass { background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .active-row { background: rgba(59, 130, 246, 0.2); border: 1px solid var(--primary); transform: scale(1.02); }
        
        @keyframes rocket-float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .rocket-anim { animation: rocket-float 2s infinite ease-in-out; }

        .goal-container { height: 200px; border: 4px solid white; border-bottom: none; position: relative; background: linear-gradient(to bottom, #1e3a8a, #0f172a); }
        .ball { width: 25px; height: 25px; background: white; border-radius: 50%; position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .dice-spin { animation: spin 0.5s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        .slot-reel { height: 100px; overflow: hidden; background: #000; border-radius: 10px; border: 1px solid #334155; position: relative; }
        .slot-item { height: 100px; display: flex; items-center; justify-content: center; font-size: 2.5rem; transition: transform 0.1s; }
    </style>
</head>
<body class="pb-24">

    <!-- Auth Layer -->
    <div id="authScreen" class="fixed inset-0 z-[100] bg-slate-950 flex flex-col items-center justify-center p-8">
        <div class="mb-10 text-center">
            <h1 class="text-6xl font-black text-blue-500 italic tracking-tighter">WINNIX </h1>
            <p class="text-slate-500 font-bold mt-2">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù† Ø§Ù„Ø±Ø­Ù„Ø© ÙÙŠ Ø§Ù„ÙÙˆØ² Ø§Ø¨Ù†ÙŠ</p>
        </div>
        <div class="w-full max-w-sm space-y-4">
            <input type="text" id="usernameInput" class="w-full bg-slate-900 border border-slate-800 p-5 rounded-2xl text-white font-bold text-center outline-none focus:border-blue-500" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
            <button onclick="core.login()" class="w-full bg-blue-600 hover:bg-blue-700 py-5 rounded-2xl font-black text-xl shadow-2xl transition-all">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
        </div>
    </div>

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 glass z-50 px-4 py-3 flex justify-between items-center hidden" id="mainHeader">
        <div class="flex items-center gap-3">
            <div id="avatar" class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center font-black">?</div>
            <div>
                <p id="uiUser" class="text-xs font-black uppercase">USER</p>
                <p class="text-[9px] text-green-500 font-bold">Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†</p>
            </div>
        </div>
        <div class="flex items-center gap-2 bg-black/40 p-1 rounded-xl border border-white/5">
            <div class="px-3 py-1">
                <span id="uiBalance" class="text-blue-400 font-black text-lg">0.00</span>
                <span class="text-[8px] text-slate-500 mr-1">EGP</span>
            </div>
            <button onclick="core.openModal('deposit')" class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center"><i class="fa-solid fa-plus text-xs"></i></button>
        </div>
    </header>

    <!-- Main View -->
    <main id="appView" class="pt-20 px-4 hidden"></main>

    <!-- Nav -->
    <nav class="fixed bottom-0 left-0 right-0 glass z-50 py-3 flex justify-around border-t border-white/5 hidden" id="mainNav">
        <button onclick="core.route('home')" class="flex flex-col items-center opacity-60 hover:opacity-100 transition"><i class="fa-solid fa-house text-xl"></i><span class="text-[10px] mt-1 font-bold">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></button>
        <button onclick="core.route('crash')" class="flex flex-col items-center opacity-60 hover:opacity-100 transition"><i class="fa-solid fa-rocket text-xl text-blue-500"></i><span class="text-[10px] mt-1 font-bold">ÙƒØ±Ø§Ø´</span></button>
        <button onclick="core.route('casino')" class="flex flex-col items-center opacity-60 hover:opacity-100 transition"><i class="fa-solid fa-gem text-xl text-purple-500"></i><span class="text-[10px] mt-1 font-bold">ÙƒØ§Ø²ÙŠÙ†Ùˆ</span></button>
        <button onclick="core.route('profile')" class="flex flex-col items-center opacity-60 hover:opacity-100 transition"><i class="fa-solid fa-wallet text-xl"></i><span class="text-[10px] mt-1 font-bold">Ù…Ø­ÙØ¸ØªÙŠ</span></button>
    </nav>

    <!-- Modal System -->
    <div id="modalOverlay" class="fixed inset-0 z-[110] bg-black/95 hidden items-center justify-center p-6 backdrop-blur-md">
        <div class="bg-slate-900 border border-slate-800 w-full max-w-sm rounded-3xl p-6 relative">
            <h3 id="modalTitle" class="text-xl font-black mb-6 text-center italic"></h3>
            <div id="modalContent"></div>
            <button onclick="core.closeModal()" class="w-full mt-6 text-slate-500 text-sm font-bold">Ø¥ØºØ§Ø¡</button>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-24 left-1/2 -translate-x-1/2 z-[120] bg-slate-800 px-6 py-3 rounded-2xl shadow-2xl opacity-0 transition-all pointer-events-none flex items-center gap-3">
        <span id="toastMsg" class="font-bold text-sm"></span>
    </div>

    <script>
        // --- CORE ---
        const core = {
            state: { user: null, balance: 100.00, history: [] },
            config: { adminPin: "208090" },

            init() {
                const data = localStorage.getItem('winnix_pro_v3');
                if(data) this.state = JSON.parse(data);
                if(this.state.user) this.showApp();
                this.startCrashSystem();
            },

            save() {
                localStorage.setItem('winnix_pro_v3', JSON.stringify(this.state));
                this.updateUI();
            },

            login() {
                const name = document.getElementById('usernameInput').value.trim();
                if(name.length < 2) return this.notify("Ø§Ù„Ø§Ø³Ù… Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹", "error");
                this.state.user = name;
                this.save();
                this.showApp();
                this.route('home');
            },

            showApp() {
                document.getElementById('authScreen').classList.add('hidden');
                document.getElementById('mainHeader').classList.remove('hidden');
                document.getElementById('mainNav').classList.remove('hidden');
                document.getElementById('appView').classList.remove('hidden');
                this.updateUI();
                this.route('home');
            },

            updateUI() {
                document.getElementById('uiUser').innerText = this.state.user;
                document.getElementById('uiBalance').innerText = this.state.balance.toFixed(2);
                document.getElementById('avatar').innerText = this.state.user[0].toUpperCase();
            },

            route(page) {
                const view = document.getElementById('appView');
                view.innerHTML = '';
                if(page === 'home') this.renderHome(view);
                else if(page === 'crash') games.crash.render(view);
                else if(page === 'apples') games.apples.render(view);
                else if(page === 'penalty') games.penalty.render(view);
                else if(page === 'casino') this.renderCasino(view);
                else if(page === 'profile') this.renderProfile(view);
                else if(page === 'dice') games.dice.render(view);
            },

            notify(msg, type = 'success') {
                const t = document.getElementById('toast');
                const m = document.getElementById('toastMsg');
                m.innerText = msg;
                t.style.borderLeft = `4px solid ${type === 'error' ? '#ef4444' : '#22c55e'}`;
                t.classList.remove('opacity-0', 'translate-y-[-20px]');
                t.classList.add('opacity-100', 'translate-y-0');
                setTimeout(() => {
                    t.classList.add('opacity-0', 'translate-y-[-20px]');
                    t.classList.remove('opacity-100', 'translate-y-0');
                }, 2000);
            },

            openModal(type) {
                const overlay = document.getElementById('modalOverlay');
                const title = document.getElementById('modalTitle');
                const content = document.getElementById('modalContent');
                overlay.classList.remove('hidden');
                overlay.classList.add('flex');

                if(type === 'deposit') {
                    title.innerText = "Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©";
                    content.innerHTML = `
                        <input type="number" id="mAmount" class="w-full bg-slate-950 p-4 rounded-2xl mb-3 text-center font-bold outline-none border border-slate-800" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
                        <input type="password" id="mPin" class="w-full bg-slate-950 p-4 rounded-2xl mb-4 text-center outline-none border border-slate-800" placeholder="ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„">
                        <button onclick="core.processTrans('deposit')" class="w-full bg-green-600 py-4 rounded-2xl font-black shadow-lg">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</button>
                    `;
                } else if(type === 'withdraw') {
                    title.innerText = "Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­";
                    content.innerHTML = `
                        <input type="number" id="mAmount" class="w-full bg-slate-950 p-4 rounded-2xl mb-3 text-center font-bold outline-none border border-slate-800" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
                        <input type="password" id="mPin" class="w-full bg-slate-950 p-4 rounded-2xl mb-4 text-center outline-none border border-slate-800" placeholder="ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„">
                        <button onclick="core.processTrans('withdraw')" class="w-full bg-red-600 py-4 rounded-2xl font-black shadow-lg">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³Ø­Ø¨</button>
                    `;
                }
            },

            closeModal() { document.getElementById('modalOverlay').classList.add('hidden'); },

            processTrans(type) {
                const amt = parseFloat(document.getElementById('mAmount').value);
                const pin = document.getElementById('mPin').value;
                if(pin !== this.config.adminPin) return this.notify("ÙƒÙˆØ¯ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø®Ø§Ø·Ø¦", "error");
                if(type === 'deposit') { this.state.balance += amt; this.notify("ØªÙ… Ø§Ù„Ø´Ø­Ù†"); }
                else { if(this.state.balance < amt) return this.notify("Ø±ØµÙŠØ¯ Ù†Ø§Ù‚Øµ", "error"); this.state.balance -= amt; this.notify("Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"); }
                this.save(); this.closeModal();
            },

            // CRASH ENGINE
            crashSync: { status: 'WAITING', multiplier: 1.00, target: 2.00, bets: [] },
            startCrashSystem() {
                const tick = () => {
                    if(this.crashSync.status === 'RUNNING') {
                        // Growth speed increases with multiplier
                        let speedFactor = 0.01 * (1 + (this.crashSync.multiplier - 1) * 0.4);
                        this.crashSync.multiplier += speedFactor;
                        
                        if(this.crashSync.multiplier >= this.crashSync.target) {
                            this.crashSync.status = 'BOOM';
                            setTimeout(() => this.resetCrash(), 4000);
                        }
                    }
                    if(document.getElementById('crash_mult')) games.crash.updateView();
                    setTimeout(tick, 100);
                };
                this.resetCrash();
                tick();
            },

            resetCrash() {
                this.crashSync.status = 'WAITING';
                this.crashSync.multiplier = 1.00;
                // Fair target generation
                const rand = Math.random();
                if(rand < 0.1) this.crashSync.target = 1.00; // instant crash
                else if(rand < 0.8) this.crashSync.target = 1.1 + Math.random() * 2.5;
                else this.crashSync.target = 3.5 + Math.random() * 15;
                
                this.crashSync.bets = this.generateBots();
                setTimeout(() => this.crashSync.status = 'RUNNING', 5000);
            },

            generateBots() {
                const names = ['Ø¹Ù…Ø±', 'Ù…Ø§Ø²Ù†', 'Ali_Pro', 'Tiger', 'Leo', 'Mero', 'King_99'];
                return names.map(n => ({ user: n, amt: Math.floor(Math.random()*100)+20, cashout: (1.1 + Math.random()*2).toFixed(2), cashed: false }));
            },

            renderHome(v) {
                v.innerHTML = `
                    <div class="mb-6"><h2 class="text-2xl font-black">Ø£Ù‡Ù„Ø§Ù‹ØŒ ${this.state.user} ğŸ‘‹</h2><p class="text-slate-500 text-sm">Ø§Ø®ØªØ± Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ø¨Ø¯Ø£ ÙÙŠ Ù…Ø¶Ø§Ø¹ÙØ© Ø£Ù…ÙˆØ§Ù„Ùƒ</p></div>
                    <div class="grid grid-cols-2 gap-4">
                        <div onclick="core.route('crash')" class="bg-gradient-to-br from-blue-600 to-indigo-900 p-5 rounded-3xl h-44 flex flex-col justify-between shadow-lg">
                            <i class="fa-solid fa-rocket text-4xl"></i>
                            <h3 class="font-black text-xl">ÙƒØ±Ø§Ø´</h3>
                        </div>
                        <div onclick="core.route('apples')" class="bg-gradient-to-br from-red-600 to-rose-900 p-5 rounded-3xl h-44 flex flex-col justify-between shadow-lg">
                            <i class="fa-solid fa-apple-whole text-4xl"></i>
                            <h3 class="font-black text-xl">Ø§Ù„ØªÙØ§Ø­Ø©</h3>
                        </div>
                        <div onclick="core.route('penalty')" class="bg-gradient-to-br from-green-600 to-emerald-900 p-5 rounded-3xl h-44 flex flex-col justify-between shadow-lg">
                            <i class="fa-solid fa-futbol text-4xl"></i>
                            <h3 class="font-black text-xl">Ø¶Ø±Ø¨Ø§Øª Ø¬Ø²Ø§Ø¡</h3>
                        </div>
                        <div onclick="core.route('dice')" class="bg-gradient-to-br from-amber-500 to-orange-800 p-5 rounded-3xl h-44 flex flex-col justify-between shadow-lg">
                            <i class="fa-solid fa-dice text-4xl"></i>
                            <h3 class="font-black text-xl">Ù„Ø¹Ø¨Ø© Ø§Ù„Ø²Ù‡Ø±</h3>
                        </div>
                    </div>
                `;
            },

            renderCasino(v) {
                v.innerHTML = `
                    <h2 class="text-2xl font-black mb-6">Ø±Ø¯Ù‡Ø© Ø§Ù„ÙƒØ§Ø²ÙŠÙ†Ùˆ ğŸ°</h2>
                    <div class="grid gap-4">
                        <div onclick="games.slots.render(document.getElementById('appView'))" class="bg-slate-900 p-6 rounded-3xl border border-white/5 flex items-center justify-between cursor-pointer">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center"><i class="fa-solid fa-bolt"></i></div>
                                <div><h4 class="font-black">Ø³Ù„ÙˆØªØ³ ÙÙŠØºØ§Ø³</h4><p class="text-[10px] text-slate-500">Ø§Ø±Ø¨Ø­ Ø­ØªÙ‰ 1000x</p></div>
                            </div>
                            <i class="fa-solid fa-chevron-left text-xs opacity-30"></i>
                        </div>
                        <div onclick="games.roulette.render(document.getElementById('appView'))" class="bg-slate-900 p-6 rounded-3xl border border-white/5 flex items-center justify-between cursor-pointer">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-red-600 rounded-xl flex items-center justify-center"><i class="fa-solid fa-circle-notch"></i></div>
                                <div><h4 class="font-black">Ø±ÙˆÙ„ÙŠØª</h4><p class="text-[10px] text-slate-500">ØªÙˆÙ‚Ø¹ Ø§Ù„Ù„ÙˆÙ† Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù…</p></div>
                            </div>
                            <i class="fa-solid fa-chevron-left text-xs opacity-30"></i>
                        </div>
                    </div>
                `;
            },

            renderProfile(v) {
                v.innerHTML = `
                    <div class="bg-slate-900 p-8 rounded-[2.5rem] border border-white/5 text-center">
                        <div class="w-20 h-20 bg-blue-600 rounded-full mx-auto flex items-center justify-center text-3xl font-black mb-4">${this.state.user[0]}</div>
                        <h2 class="text-xl font-black mb-8">${this.state.user}</h2>
                        <div class="space-y-3">
                            <button onclick="core.openModal('deposit')" class="w-full bg-green-600 py-4 rounded-2xl font-black">Ø¥ÙŠØ¯Ø§Ø¹</button>
                            <button onclick="core.openModal('withdraw')" class="w-full bg-slate-800 py-4 rounded-2xl font-black">Ø³Ø­Ø¨</button>
                            <button onclick="localStorage.clear(); location.reload()" class="w-full py-4 text-red-500 text-xs font-bold uppercase">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
                        </div>
                    </div>
                `;
            }
        };

        const games = {
            // CRASH FIX
            crash: {
                myBet: 0, cashed: false,
                render(v) {
                    v.innerHTML = `
                        <div class="bg-slate-950 rounded-[2.5rem] p-6 border border-white/5 mb-4 relative overflow-hidden h-60 flex flex-col items-center justify-center">
                            <div id="crash_rocket" class="rocket-anim absolute left-10 bottom-10"><i class="fa-solid fa-rocket text-5xl text-blue-500"></i></div>
                            <h1 id="crash_mult" class="text-7xl font-black italic">1.00x</h1>
                            <p id="crash_msg" class="text-xs font-bold mt-2 text-blue-400">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬ÙˆÙ„Ø©...</p>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="bg-slate-900 p-4 rounded-2xl border border-white/5">
                                <span class="text-[10px] text-slate-500 block">Ù…Ø¨Ù„Øº Ø§Ù„Ø±Ù‡Ø§Ù†</span>
                                <input type="number" id="cBet" value="10" class="bg-transparent w-full font-black text-xl outline-none">
                            </div>
                            <button id="cBtn" onclick="games.crash.handleAction()" class="bg-blue-600 rounded-2xl font-black text-xl shadow-lg">Ø±Ù‡Ø§Ù†</button>
                        </div>
                        <div class="bg-slate-900/50 rounded-2xl p-4 max-h-40 overflow-y-auto" id="crash_bets"></div>
                    `;
                },
                updateView() {
                    const sync = core.crashSync;
                    const multEl = document.getElementById('crash_mult');
                    const btn = document.getElementById('cBtn');
                    if(!multEl) return;

                    if(sync.status === 'WAITING') {
                        multEl.innerText = "WAITING";
                        multEl.style.color = "white";
                        if(!this.myBet) { btn.innerText = "Ø±Ù‡Ø§Ù†"; btn.className = "bg-blue-600 rounded-2xl font-black text-xl"; btn.disabled = false; }
                    } else if(sync.status === 'RUNNING') {
                        multEl.innerText = sync.multiplier.toFixed(2) + 'x';
                        if(this.myBet && !this.cashed) {
                            btn.innerText = "Ø³Ø­Ø¨ " + (this.myBet * sync.multiplier).toFixed(2);
                            btn.className = "bg-orange-500 text-black rounded-2xl font-black text-xl";
                            btn.disabled = false;
                        }
                    } else {
                        multEl.innerText = "BOOM";
                        multEl.style.color = "#ef4444";
                        if(this.myBet && !this.cashed) this.lose();
                    }
                    
                    const botList = document.getElementById('crash_bets');
                    if(botList) {
                        botList.innerHTML = sync.bets.map(b => `<div class="flex justify-between text-[10px] mb-1 font-bold"><span>${b.user}</span><span>${b.amt} EGP</span><span class="${sync.multiplier >= b.cashout ? 'text-green-500' : 'text-slate-500'}">${sync.multiplier >= b.cashout ? b.cashout+'x' : '...'}</span></div>`).join('');
                    }
                },
                handleAction() {
                    const sync = core.crashSync;
                    if(sync.status === 'WAITING') {
                        const amt = parseFloat(document.getElementById('cBet').value);
                        if(core.state.balance < amt) return core.notify("Ø±ØµÙŠØ¯ Ù†Ø§Ù‚Øµ", "error");
                        core.state.balance -= amt;
                        this.myBet = amt;
                        this.cashed = false;
                        core.save();
                        document.getElementById('cBtn').innerText = "ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„";
                        document.getElementById('cBtn').disabled = true;
                    } else if(sync.status === 'RUNNING' && this.myBet && !this.cashed) {
                        this.cashed = true;
                        const win = this.myBet * sync.multiplier;
                        core.state.balance += win;
                        core.notify(`Ù…Ø¨Ø±ÙˆÙƒ! Ø±Ø¨Ø­Øª ${win.toFixed(2)}`, "success");
                        this.myBet = 0;
                        core.save();
                    }
                },
                lose() { this.myBet = 0; core.notify("Ø®Ø³Ø§Ø±Ø©!", "error"); }
            },

            // PENALTY FIX
            penalty: {
                bet: 0, mult: 1.0, active: false,
                render(v) {
                    v.innerHTML = `
                        <div class="bg-slate-900 p-6 rounded-3xl border border-white/5 mb-6 text-center">
                            <h3 class="font-black text-green-500 mb-6 italic">PENALTY SHOOT</h3>
                            <div class="goal-container rounded-t-xl overflow-hidden mb-6">
                                <div id="p_goalie" class="absolute bottom-0 left-1/2 -translate-x-1/2 text-5xl">ğŸ§¤</div>
                                <div id="p_ball" class="ball"></div>
                                <div onclick="games.penalty.shoot(1)" class="absolute top-4 left-4 w-16 h-16 border-2 border-white/10 rounded-full"></div>
                                <div onclick="games.penalty.shoot(2)" class="absolute top-4 right-4 w-16 h-16 border-2 border-white/10 rounded-full"></div>
                                <div onclick="games.penalty.shoot(3)" class="absolute top-4 left-1/2 -translate-x-1/2 w-16 h-16 border-2 border-white/10 rounded-full"></div>
                            </div>
                            <div class="bg-black/40 p-4 rounded-2xl flex justify-between"><span class="text-xs text-slate-500">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ</span><span id="p_pot" class="font-black text-green-500">0.00</span></div>
                        </div>
                        <div id="p_ctrl" class="grid grid-cols-2 gap-4">
                            <input type="number" id="pBet" value="10" class="bg-slate-900 p-4 rounded-2xl text-center font-bold border border-white/5">
                            <button onclick="games.penalty.start()" class="bg-green-600 rounded-2xl font-black">Ø§Ø¨Ø¯Ø£</button>
                        </div>
                    `;
                },
                start() {
                    const amt = parseFloat(document.getElementById('pBet').value);
                    if(core.state.balance < amt) return core.notify("Ø±ØµÙŠØ¯ Ù†Ø§Ù‚Øµ", "error");
                    core.state.balance -= amt;
                    this.bet = amt; this.mult = 1.0; this.active = true;
                    document.getElementById('p_ctrl').innerHTML = `<button onclick="games.penalty.cashout()" class="col-span-2 bg-orange-500 text-black py-4 rounded-2xl font-black">Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</button>`;
                    core.save();
                },
                shoot(target) {
                    if(!this.active) return;
                    const goaliePos = Math.floor(Math.random()*3)+1;
                    const goalie = document.getElementById('p_goalie');
                    const ball = document.getElementById('p_ball');
                    
                    if(goaliePos === 1) goalie.style.left = "20%";
                    else if(goaliePos === 2) goalie.style.left = "80%";
                    else goalie.style.left = "50%";
                    
                    if(target === 1) ball.style.cssText = "bottom: 150px; left: 20%;";
                    else if(target === 2) ball.style.cssText = "bottom: 150px; left: 80%;";
                    else ball.style.cssText = "bottom: 150px; left: 50%;";

                    setTimeout(() => {
                        if(goaliePos === target) {
                            core.notify("ØµØ¯Ù‡Ø§ Ø§Ù„Ø­Ø§Ø±Ø³!", "error");
                            this.lose();
                        } else {
                            this.mult *= 1.5;
                            document.getElementById('p_pot').innerText = (this.bet * this.mult).toFixed(2);
                            core.notify("Ø¬Ù€Ù€Ù€Ù€Ù€ÙˆÙˆÙˆÙˆÙ„!");
                            setTimeout(() => {
                                ball.style.cssText = "bottom: 10px; left: 50%; transform: translateX(-50%);";
                                goalie.style.cssText = "bottom: 0; left: 50%; transform: translateX(-50%);";
                            }, 800);
                        }
                    }, 500);
                },
                cashout() {
                    const win = this.bet * this.mult;
                    core.state.balance += win;
                    core.notify(`ØªÙ… Ø³Ø­Ø¨ ${win.toFixed(1)}`);
                    this.active = false; core.save(); core.route('penalty');
                },
                lose() { this.active = false; setTimeout(() => core.route('penalty'), 1500); }
            },

            // APPLE GAME
            apples: {
                level: 0, bet: 0, active: false,
                render(v) {
                    v.innerHTML = `
                        <div class="bg-slate-900 p-6 rounded-3xl border border-white/5 mb-6 text-center">
                            <h3 class="font-black text-red-500 mb-4">Ù„Ø¹Ø¨Ø© Ø§Ù„ØªÙØ§Ø­Ø©</h3>
                            <div class="flex flex-col-reverse gap-2" id="aGrid"></div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <input type="number" id="aBet" value="10" class="bg-slate-900 p-4 rounded-2xl text-center font-bold border border-white/5 outline-none">
                            <button id="aBtn" onclick="games.apples.start()" class="bg-red-600 rounded-2xl font-black">Ø§Ø¨Ø¯Ø£</button>
                        </div>
                    `;
                    this.build();
                },
                build() {
                    const g = document.getElementById('aGrid');
                    for(let i=0; i<10; i++) {
                        const row = document.createElement('div');
                        row.className = "flex gap-2 opacity-30 pointer-events-none"; row.id = `ar_${i}`;
                        for(let j=0; j<5; j++) row.innerHTML += `<div onclick="games.apples.pick(${i},${j})" class="flex-1 aspect-square bg-slate-800 rounded-xl border border-white/5 flex items-center justify-center cursor-pointer">?</div>`;
                        g.appendChild(row);
                    }
                },
                start() {
                    const amt = parseFloat(document.getElementById('aBet').value);
                    if(core.state.balance < amt) return core.notify("Ø±ØµÙŠØ¯ Ù†Ø§Ù‚Øµ", "error");
                    core.state.balance -= amt; this.bet = amt; this.level = 0; this.active = true;
                    document.getElementById('aBtn').innerText = "Ø³Ø­Ø¨";
                    document.getElementById('aBtn').onclick = () => this.cashout();
                    this.next(); core.save();
                },
                next() {
                    document.querySelectorAll('[id^="ar_"]').forEach(r => r.className = "flex gap-2 opacity-30 pointer-events-none");
                    const r = document.getElementById(`ar_${this.level}`);
                    if(r) r.className = "flex gap-2 active-row";
                },
                pick(r, c) {
                    if(!this.active || r !== this.level) return;
                    let bombs = this.level < 3 ? 1 : (this.level < 6 ? 2 : 3);
                    const isBomb = Math.random() < (bombs/5);
                    const cell = document.getElementById(`ar_${r}`).children[c];
                    if(isBomb) { cell.innerText = "ğŸ’£"; cell.className += " bg-red-600"; this.lose(); }
                    else { cell.innerText = "ğŸ"; cell.className += " bg-green-600"; this.level++; if(this.level >= 10) this.cashout(); else this.next(); }
                },
                cashout() {
                    const mults = [1.2, 1.5, 1.93, 2.4, 3.8, 6.5, 12, 25, 50, 100];
                    const win = this.bet * (this.level > 0 ? mults[this.level-1] : 1);
                    core.state.balance += win; core.notify(`Ø±Ø¨Ø­Øª ${win.toFixed(1)}`);
                    this.active = false; core.save(); core.route('apples');
                },
                lose() { this.active = false; core.save(); setTimeout(() => core.route('apples'), 1500); }
            },

            // SLOTS
            slots: {
                render(v) {
                    v.innerHTML = `
                        <div class="bg-slate-900 p-8 rounded-[2.5rem] border border-white/5 text-center">
                            <h3 class="font-black text-purple-500 mb-8">Ø³Ù„ÙˆØªØ³ ÙÙŠØºØ§Ø³ ğŸ°</h3>
                            <div class="grid grid-cols-3 gap-2 mb-8">
                                <div class="slot-reel" id="r1"><div class="slot-item">ğŸ’</div></div>
                                <div class="slot-reel" id="r2"><div class="slot-item">ğŸ’</div></div>
                                <div class="slot-reel" id="r3"><div class="slot-item">ğŸ’</div></div>
                            </div>
                            <input type="number" id="sBet" value="10" class="w-full bg-black/40 p-4 rounded-2xl text-center font-bold mb-4 outline-none border border-white/5">
                            <button onclick="games.slots.spin()" class="w-full bg-purple-600 py-4 rounded-2xl font-black shadow-lg">SPIN</button>
                        </div>
                    `;
                },
                spin() {
                    const amt = parseFloat(document.getElementById('sBet').value);
                    if(core.state.balance < amt) return core.notify("Ø±ØµÙŠØ¯ Ù†Ø§Ù‚Øµ", "error");
                    core.state.balance -= amt; core.save();
                    
                    const icons = ['ğŸ’', 'ğŸ‹', 'ğŸ‡', 'ğŸ’', '7ï¸âƒ£'];
                    const res = [icons[Math.floor(Math.random()*5)], icons[Math.floor(Math.random()*5)], icons[Math.floor(Math.random()*5)]];
                    
                    [1,2,3].forEach(i => {
                        const el = document.getElementById(`r${i}`).firstChild;
                        el.style.transform = "translateY(-100px)";
                        setTimeout(() => {
                            el.innerText = r
